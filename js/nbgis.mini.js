!function(window,document,undefined){L.CRS.EPSG4326=L.extend({},L.CRS.Earth,{code:"EPSG:4326",options:{resolution:.001,origin:[-400,400]},create:function(t){return this.initialize(t),this},initialize:function(t){L.setOptions(this,t);var i=L.mapPoint(this.options.origin),e=i.x>0?-1:1,o=i.y>0?-1:1,n=Math.abs(i.x),s=Math.abs(i.y);this.transformation=new L.Transformation(e,n,o,s)},projection:L.Projection.LonLat,scale:function(t){return Math.pow(2,t)/this.options.resolution},zoom:function(t){return Math.log(t*this.options.resolution)/Math.LN2}}),L.Animation=L.Evented.extend({statics:{notStartedState:0,endedState:1,pausedState:2,runState:3},options:{duration:300,easing:"Linear",callback:function(){}},initialize:function(t,i,e,o,n){if(this._state=L.Animation.notStartedState,this.delayTime=0,!this.isNumber(t)||!this.isNumber(i))return window.console&&console.error("from和to两个参数必须且为数值"),0;this.from=t,this.to=i;var s=Math.tween||L.tween;if(!s)return window.console&&console.error("缓动算法函数缺失"),0;var r={};this.setOptions(r,e),this.setOptions(r,o),this.setOptions(r,n),L.setOptions(this,r),this.duration=Math.ceil(this.options.duration),this._curDuration=this.duration,this.options.easing=this.options.easing.slice(0,1).toUpperCase()+this.options.easing.slice(1);var a=this.options.easing.split(".");return 1==a.length?this.fnGetValue=s[a[0]]:2==a.length&&(this.fnGetValue=s[a[0]]&&s[a[0]][a[1]]),0==this.isFunction(this.fnGetValue)?void console.error('没有找到名为"'+this.options.easing+'"的动画算法'):void this.start()},setOptions:function(t,i){this.isFunction(i)?t.callback=i:this.toMillisecond(i)!=-1?t.duration=this.toMillisecond(i):this.isString(i)&&(t.easing=i)},isUndefined:function(t){return"undefined"==typeof t},isFunction:function(t){return"function"==typeof t},isNumber:function(t){return"number"==typeof t},isString:function(t){return"string"==typeof t},toMillisecond:function(t){if(this.isNumber(t))return t;if(this.isString(t)){if(/\d+m?s$/.test(t))return/ms/.test(t)?1*t.replace("ms",""):1e3*t.replace("s","");if(/^\d+$/.test(t))return+t}return-1},isRunning:function(){return this._state===L.Animation.runState},isEnded:function(){return this._state===L.Animation.endedState},isStarted:function(){return this._state!==L.Animation.notStartedState},isPaused:function(){return this._state===L.Animation.pausedState},start:function(){this.isRunning()||(this.isPaused()?this.resume():(this._startAnimation(),this.fire("start")))},resume:function(){this.isPaused()&&this._startAnimation()},pause:function(){this.isRunning()&&(this._pauseStartTime=Date.now(),this._state=L.Animation.pausedState,this._stopAnimation())},stop:function(){this.isEnded()||(this._stopAnimation(),this._state=L.Animation.endedState,this.fire("end"))},_startAnimation:function(){this._state=L.Animation.runState,this._startTime=Date.now(),this._loopStartTime=this._startTime,this._animId=L.Util.requestAnimFrame(this.loop,this),this._animRequested=!0},_stopAnimation:function(){this._animRequested&&(L.Util.cancelAnimFrame(this._animId),this._animId=null,this._animRequested=!1)},loop:function(){if(this._animRequested=!1,this.isRunning()){var t=Date.now();this._curDuration-=t-this._loopStartTime,this._loopStartTime=t;var i=this.duration-this._curDuration,e=this.fnGetValue(i,this.from,this.to-this.from,this.duration);i<=this.duration?(this.options.callback(e),this._animId=L.Util.requestAnimFrame(this.loop,this),this._animRequested=!0):(this._animId=null,this.options.callback(this.to,!0))}}}),L.animation=function(t,i,e,o,n){return new L.Animation(t,i,e,o,n)};var Tween={Linear:function(t,i,e,o){return e*t/o+i},Quad:{easeIn:function(t,i,e,o){return e*(t/=o)*t+i},easeOut:function(t,i,e,o){return-e*(t/=o)*(t-2)+i},easeInOut:function(t,i,e,o){return(t/=o/2)<1?e/2*t*t+i:-e/2*(--t*(t-2)-1)+i}},Cubic:{easeIn:function(t,i,e,o){return e*(t/=o)*t*t+i},easeOut:function(t,i,e,o){return e*((t=t/o-1)*t*t+1)+i},easeInOut:function(t,i,e,o){return(t/=o/2)<1?e/2*t*t*t+i:e/2*((t-=2)*t*t+2)+i}},Quart:{easeIn:function(t,i,e,o){return e*(t/=o)*t*t*t+i},easeOut:function(t,i,e,o){return-e*((t=t/o-1)*t*t*t-1)+i},easeInOut:function(t,i,e,o){return(t/=o/2)<1?e/2*t*t*t*t+i:-e/2*((t-=2)*t*t*t-2)+i}},Quint:{easeIn:function(t,i,e,o){return e*(t/=o)*t*t*t*t+i},easeOut:function(t,i,e,o){return e*((t=t/o-1)*t*t*t*t+1)+i},easeInOut:function(t,i,e,o){return(t/=o/2)<1?e/2*t*t*t*t*t+i:e/2*((t-=2)*t*t*t*t+2)+i}},Sine:{easeIn:function(t,i,e,o){return-e*Math.cos(t/o*(Math.PI/2))+e+i},easeOut:function(t,i,e,o){return e*Math.sin(t/o*(Math.PI/2))+i},easeInOut:function(t,i,e,o){return-e/2*(Math.cos(Math.PI*t/o)-1)+i}},Expo:{easeIn:function(t,i,e,o){return 0==t?i:e*Math.pow(2,10*(t/o-1))+i},easeOut:function(t,i,e,o){return t==o?i+e:e*(-Math.pow(2,-10*t/o)+1)+i},easeInOut:function(t,i,e,o){return 0==t?i:t==o?i+e:(t/=o/2)<1?e/2*Math.pow(2,10*(t-1))+i:e/2*(-Math.pow(2,-10*--t)+2)+i}},Circ:{easeIn:function(t,i,e,o){return-e*(Math.sqrt(1-(t/=o)*t)-1)+i},easeOut:function(t,i,e,o){return e*Math.sqrt(1-(t=t/o-1)*t)+i},easeInOut:function(t,i,e,o){return(t/=o/2)<1?-e/2*(Math.sqrt(1-t*t)-1)+i:e/2*(Math.sqrt(1-(t-=2)*t)+1)+i}},Elastic:{easeIn:function(t,i,e,o,n,s){var r;return 0==t?i:1==(t/=o)?i+e:("undefined"==typeof s&&(s=.3*o),!n||n<Math.abs(e)?(r=s/4,n=e):r=s/(2*Math.PI)*Math.asin(e/n),-(n*Math.pow(2,10*(t-=1))*Math.sin((t*o-r)*(2*Math.PI)/s))+i)},easeOut:function(t,i,e,o,n,s){var r;return 0==t?i:1==(t/=o)?i+e:("undefined"==typeof s&&(s=.3*o),!n||n<Math.abs(e)?(n=e,r=s/4):r=s/(2*Math.PI)*Math.asin(e/n),n*Math.pow(2,-10*t)*Math.sin((t*o-r)*(2*Math.PI)/s)+e+i)},easeInOut:function(t,i,e,o,n,s){var r;return 0==t?i:2==(t/=o/2)?i+e:("undefined"==typeof s&&(s=o*(.3*1.5)),!n||n<Math.abs(e)?(n=e,r=s/4):r=s/(2*Math.PI)*Math.asin(e/n),t<1?-.5*(n*Math.pow(2,10*(t-=1))*Math.sin((t*o-r)*(2*Math.PI)/s))+i:n*Math.pow(2,-10*(t-=1))*Math.sin((t*o-r)*(2*Math.PI)/s)*.5+e+i)}},Back:{easeIn:function(t,i,e,o,n){return"undefined"==typeof n&&(n=1.70158),e*(t/=o)*t*((n+1)*t-n)+i},easeOut:function(t,i,e,o,n){return"undefined"==typeof n&&(n=1.70158),e*((t=t/o-1)*t*((n+1)*t+n)+1)+i},easeInOut:function(t,i,e,o,n){return"undefined"==typeof n&&(n=1.70158),(t/=o/2)<1?e/2*(t*t*(((n*=1.525)+1)*t-n))+i:e/2*((t-=2)*t*(((n*=1.525)+1)*t+n)+2)+i}},Bounce:{easeIn:function(t,i,e,o){return e-Tween.Bounce.easeOut(o-t,0,e,o)+i},easeOut:function(t,i,e,o){return(t/=o)<1/2.75?e*(7.5625*t*t)+i:t<2/2.75?e*(7.5625*(t-=1.5/2.75)*t+.75)+i:t<2.5/2.75?e*(7.5625*(t-=2.25/2.75)*t+.9375)+i:e*(7.5625*(t-=2.625/2.75)*t+.984375)+i},easeInOut:function(t,i,e,o){return t<o/2?.5*Tween.Bounce.easeIn(2*t,0,e,o)+i:.5*Tween.Bounce.easeOut(2*t-o,0,e,o)+.5*e+i}}};L.tween=Tween,L.BaseLayer=L.Layer.extend({options:{opacity:1,updateWhenIdle:L.Browser.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:undefined,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){L.setOptions(this,t)},onAdd:function(){this._initContainer(),this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeContent(),L.DomUtil.remove(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=null},bringToFront:function(){return this._map&&(L.DomUtil.toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(L.DomUtil.toBack(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeContent(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=L.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createContent:function(){return document.createElement("div")},latLng2Screen:function(t,i){return this._map.latLngToContainerPoint(L.latLng(t,i))},latLng2Layer:function(t,i){return this._map.latLngToLayerPoint(L.latLng(t,i))},_updateZIndex:function(){this._container&&this.options.zIndex!==undefined&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var i,e=this.getPane().children,o=-t(-(1/0),1/0),n=0,s=e.length;n<s;n++)i=e[n].style.zIndex,e[n]!==this._container&&i&&(o=t(o,+i));isFinite(o)&&(this.options.zIndex=o+t(-1,1),this._updateZIndex())},_updateContentOpacity:function(){},_updateOpacity:function(){this._map&&(L.Browser.ielt9||(L.DomUtil.setOpacity(this._container,this.options.opacity),this._updateContentOpacity()))},_initContainer:function(){this._container||(this._container=L.DomUtil.create("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,i=this._map;i&&(this._origin=i.project(i.unproject(i.getPixelOrigin()),t).round(),this._setZoomTransforms(i.getCenter(),i.getZoom()),this._oldZoom=this._tileZoom,this._oldOrigin=this._origin)},_removeContent:function(){},_invalidateAll:function(){this._removeContent(),this._tileZoom=null},_resetView:function(t){var i=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),i)},_animateZoom:function(t){this._setZoomTransforms(t.center,t.zoom)},_setView:function(t,i,e){var o=Math.round(i);(this.options.maxZoom!==undefined&&o>this.options.maxZoom||this.options.minZoom!==undefined&&o<this.options.minZoom)&&(o=undefined);var n=this.options.updateWhenZooming&&o!==this._tileZoom;e&&!n||(this._tileZoom=o,this._abortLoading&&this._abortLoading(),this._updateLevels(),o!==undefined&&this._update(t))},_setZoomTransforms:function(t,i){if(this._oldOrigin){var e=this._map.getZoomScale(i,this._oldZoom),o=this._oldOrigin.add(this._oldPosition).multiplyBy(e).subtract(this._map._getNewPixelOrigin(t,i)).round();L.Browser.any3d?L.DomUtil.setTransform(this._container,o,e):L.DomUtil.setPosition(this._container,o)}},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_update:function(t){var i=this._map;if(i){var e=i.getZoom();if(t===undefined&&(t=i.getCenter()),this._tileZoom!==undefined)return Math.abs(e-this._tileZoom)>1?void this._setView(t,e):void(this._loading||(this._loading=!0,this.fire("loading")))}},_getPosition:function(){var t=this._map.getBounds(),i=t.getWest(),e=t.getNorth();return this._oldPosition=this._map.project([e,i]).subtract(this._origin),this._oldPosition},glow:function(t){if(this._map&&this.setOpacity){var i=this.options.opacity,e="Linear",o=0,n=this;L.animation(0,1,e,5e3,function(t,e){var s=10*t,r=s-o;r>2&&(r-=2,o+=2),r>1?n.setOpacity(r-1):r>=0&&n.setOpacity(1-r),e&&n.setOpacity(i)})}return this}}),L.baseLayer=function(t){return new L.BaseLayer(t)},L.NBBaseLayer=L.BaseLayer,L.nbBaseLayer=L.baseLayer,L.DivOverlay=L.Layer.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,i){L.setOptions(this,t),this._source=i},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&L.DomUtil.setOpacity(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&L.DomUtil.setOpacity(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(L.DomUtil.setOpacity(this._container,0),this._removeTimeout=setTimeout(L.bind(L.DomUtil.remove,L.DomUtil,this._container),200)):L.DomUtil.remove(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=L.latLng(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&L.DomUtil.toFront(this._container),this},bringToBack:function(){return this._map&&L.DomUtil.toBack(this._container),this},_updateContent:function(){if(this._content){var t=this._contentNode,i="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof i)t.innerHTML=i;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(i)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),i=L.point(this.options.offset),e=this._getAnchor();this._zoomAnimated?L.DomUtil.setPosition(this._container,t.add(e)):i=i.add(t).add(e);var o=this._containerBottom=-i.y,n=this._containerLeft=-Math.round(this._containerWidth/2)+i.x;this._container.style.bottom=o+"px",this._container.style.left=n+"px"}},_getAnchor:function(){return[0,0]}}),L.Popup=L.DivOverlay.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){L.DivOverlay.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof L.Graphic||this._source.on("preclick",L.DomEvent.stopPropagation))},onRemove:function(t){L.DivOverlay.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof L.Graphic||this._source.off("preclick",L.DomEvent.stopPropagation))},getEvents:function(){var t=L.DivOverlay.prototype.getEvents.call(this);return("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",i=this._container=L.DomUtil.create("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated");if(this.options.closeButton){var e=this._closeButton=L.DomUtil.create("a",t+"-close-button",i);e.href="#close",e.innerHTML="&#215;",L.DomEvent.on(e,"click",this._onCloseButtonClick,this)}var o=this._wrapper=L.DomUtil.create("div",t+"-content-wrapper",i);this._contentNode=L.DomUtil.create("div",t+"-content",o),L.DomEvent.disableClickPropagation(o).disableScrollPropagation(this._contentNode).on(o,"contextmenu",L.DomEvent.stopPropagation),this._tipContainer=L.DomUtil.create("div",t+"-tip-container",i),this._tip=L.DomUtil.create("div",t+"-tip",this._tipContainer)},_updateLayout:function(){var t=this._contentNode,i=t.style;i.width="",i.whiteSpace="nowrap";var e=t.offsetWidth;e=Math.min(e,this.options.maxWidth),e=Math.max(e,this.options.minWidth),i.width=e+1+"px",i.whiteSpace="",i.height="";var o=t.offsetHeight,n=this.options.maxHeight,s="leaflet-popup-scrolled";n&&o>n?(i.height=n+"px",L.DomUtil.addClass(t,s)):L.DomUtil.removeClass(t,s),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),e=this._getAnchor();L.DomUtil.setPosition(this._container,i.add(e))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var t=this._map,i=parseInt(L.DomUtil.getStyle(this._container,"marginBottom"),10)||0,e=this._container.offsetHeight+i,o=this._containerWidth,n=new L.Point(this._containerLeft,-e-this._containerBottom);n._add(L.DomUtil.getPosition(this._container));var s=t.layerPointToContainerPoint(n),r=L.point(this.options.autoPanPadding),a=L.point(this.options.autoPanPaddingTopLeft||r),h=L.point(this.options.autoPanPaddingBottomRight||r),l=t.getSize(),p=0,u=0;s.x+o+h.x>l.x&&(p=s.x+o-l.x+h.x),s.x-p-a.x<0&&(p=s.x-a.x),s.y+e+h.y>l.y&&(u=s.y+e-l.y+h.y),s.y-u-a.y<0&&(u=s.y-a.y),(p||u)&&t.fire("autopanstart").panBy([p,u])}},_onCloseButtonClick:function(t){this._close(),L.DomEvent.stop(t)},_getAnchor:function(){return L.point(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),L.popup=function(t,i){return new L.Popup(t,i)},L.Map.mergeOptions({closePopupOnClick:!0}),L.Map.include({openPopup:function(t,i,e){return t instanceof L.Popup||(t=new L.Popup(e).setContent(t)),i&&t.setLatLng(i),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),L.Layer.include({bindPopup:function(t,i){return t instanceof L.Popup?(L.setOptions(t,i),this._popup=t,t._source=this):(this._popup&&!i||(this._popup=new L.Popup(i,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,i){if(t instanceof L.Layer||(i=t,t=this),t instanceof L.FeatureGroup)for(var e in this._layers){t=this._layers[e];break}return i||(i=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup._source=t,this._popup.update(),this._map.openPopup(this._popup,i)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var i=t.layer||t.target;if(this._popup&&this._map)return L.DomEvent.stop(t),i instanceof L.Path?void this.openPopup(t.layer||t.target,t.latlng):void(this._map.hasLayer(this._popup)&&this._popup._source===i?this.closePopup():this.openPopup(i,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),L.Tooltip=L.DivOverlay.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){L.DivOverlay.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){L.DivOverlay.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=L.DivOverlay.prototype.getEvents.call(this);return L.Browser.touch&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip",i=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=L.DomUtil.create("div",i)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var i=this._map,e=this._container,o=i.latLngToContainerPoint(i.getCenter()),n=i.layerPointToContainerPoint(t),s=this.options.direction,r=e.offsetWidth,a=e.offsetHeight,h=L.point(this.options.offset),l=this._getAnchor();"top"===s?t=t.add(L.point(-r/2+h.x,-a+h.y+l.y,!0)):"bottom"===s?t=t.subtract(L.point(r/2-h.x,-h.y,!0)):"center"===s?t=t.subtract(L.point(r/2+h.x,a/2-l.y+h.y,!0)):"right"===s||"auto"===s&&n.x<o.x?(s="right",t=t.add(L.point(h.x+l.x,l.y-a/2+h.y,!0))):(s="left",t=t.subtract(L.point(r+l.x-h.x,a/2-l.y-h.y,!0))),L.DomUtil.removeClass(e,"leaflet-tooltip-right"),L.DomUtil.removeClass(e,"leaflet-tooltip-left"),L.DomUtil.removeClass(e,"leaflet-tooltip-top"),L.DomUtil.removeClass(e,"leaflet-tooltip-bottom"),L.DomUtil.addClass(e,"leaflet-tooltip-"+s),L.DomUtil.setPosition(e,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&L.DomUtil.setOpacity(this._container,t)},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(i)},_getAnchor:function(){return L.point(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),L.tooltip=function(t,i){return new L.Tooltip(t,i)},L.Map.include({openTooltip:function(t,i,e){return t instanceof L.Tooltip||(t=new L.Tooltip(e).setContent(t)),i&&t.setLatLng(i),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),L.Layer.include({bindTooltip:function(t,i){return t instanceof L.Tooltip?(L.setOptions(t,i),this._tooltip=t,t._source=this):(this._tooltip&&!i||(this._tooltip=L.tooltip(i,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var i=t?"off":"on",e={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?e.add=this._openTooltip:(e.mouseover=this._openTooltip,e.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(e.mousemove=this._moveTooltip),L.Browser.touch&&(e.click=this._openTooltip)),this[i](e),this._tooltipHandlersAdded=!t}},openTooltip:function(t,i){if(t instanceof L.Layer||(i=t,t=this),t instanceof L.FeatureGroup)for(var e in this._layers){t=this._layers[e];break}return i||(i=t.getCenter?t.getCenter():t.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=t,this._tooltip.update(),this._map.openTooltip(this._tooltip,i),this._tooltip.options.interactive&&this._tooltip._container&&(L.DomUtil.addClass(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(L.DomUtil.removeClass(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var i=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(i,this._tooltip.options.sticky?t.latlng:undefined)},_moveTooltip:function(t){var i,e,o=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(i=this._map.mouseEventToContainerPoint(t.originalEvent),e=this._map.containerPointToLayerPoint(i),o=this._map.layerPointToLatLng(e)),this._tooltip.setLatLng(o)}}),L.CommonTileLayer=L.TileLayer.extend({initialize:function(t,i){t+="/tile/{z}/{y}/{x}",L.TileLayer.prototype.initialize.call(this,t,i)}}),L.commonTileLayer=function(t,i){return new L.CommonTileLayer(t,i)},L.NBCommonTileLayer=L.CommonTileLayer,L.nbCommonTileLayer=L.commonTileLayer,L.GraphicsLayer=L.Layer.extend({options:{minZoom:0,maxZoom:undefined,padding:.5},initialize:function(t){L.setOptions(this,t),L.stamp(this),this._graphicsProvider=this._graphicsProvider||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&L.DomUtil.addClass(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updateGraphics,this),this._draw()},_initContainer:function(){if(L.Browser.ielt9){var t=this._map.getSize();this._container=L.DomUtil.create("div"),this._ctx=L.DomUtil.createVML("group"),this._ctx.style.width=t.x,this._ctx.style.height=t.y,this._ctx.style.left="0px",this._ctx.style.top="0px",this._ctx.coordsize=t.x+","+t.y,this._container.appendChild(this._ctx),L.DomEvent.on(this._ctx,"mousemove",this._onMouseMove,this).on(this._ctx,"click dblclick mousedown mouseup contextmenu",this._onClick,this).on(this._ctx,"mouseout",this._handleMouseOut,this)}else{var i=this._container=document.createElement("canvas");L.DomEvent.on(i,"mousemove",L.Util.throttle(this._onMouseMove,32,this),this).on(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this).on(i,"mouseout",this._handleMouseOut,this),this._ctx=i.getContext("2d")}},onRemove:function(){L.DomUtil.remove(this._container),this.off("update",this._updateGraphics,this)},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdateGraphics=!0},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,i){var e=this._map.getZoomScale(i,this._zoom),o=L.DomUtil.getPosition(this._container),n=this._map.getSize().multiplyBy(.5+this.options.padding),s=this._map.project(this._center,i),r=this._map.project(t,i),a=r.subtract(s),h=n.multiplyBy(-e).add(o).add(n).subtract(a);L.Browser.any3d?L.DomUtil.setTransform(this._container,h,e):L.DomUtil.setPosition(this._container,h)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._graphicsProvider)this._graphicsProvider[t]._reset();this._postponeUpdateGraphics&&(this._postponeUpdateGraphics=!1,this._updateGraphics())},_onZoomEnd:function(){for(var t in this._graphicsProvider)this._graphicsProvider[t]._project()},_updateGraphics:function(){if(!this._postponeUpdateGraphics){var t=this._map.getZoom();if(this.options.maxZoom&&t>this.options.maxZoom||t<this.options.minZoom)return void this._clear();var i;this._redrawBounds=null;for(var e in this._graphicsProvider)i=this._graphicsProvider[e],i._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnGraphics={};var t=this.options.padding,i=this._map.getSize(),e=this._map.containerPointToLayerPoint(i.multiplyBy(-t)).round();this._bounds=new L.Bounds(e,e.add(i.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom();var o=this._bounds,n=this._container,i=o.getSize(),s=L.Browser.retina?2:1;L.DomUtil.setPosition(n,o.min),n.width=s*i.x,n.height=s*i.y,n.style.width=i.x+"px",n.style.height=i.y+"px",L.Browser.retina&&this._ctx.scale(2,2),L.Browser.ielt9||this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_initGraphic:function(t){this._updateDashArray(t),this._graphicsProvider[L.stamp(t)]=t;var i=t._order={graphic:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=i),this._drawLast=i,this._drawFirst=this._drawFirst||this._drawLast},_addGraphic:function(t){this._requestRedraw(t)},_removeGraphic:function(t){var i=t._order,e=i.next,o=i.prev;e?e.prev=o:this._drawLast=o,o?o.next=e:this._drawFirst=e,delete t._order,delete this._graphicsProvider[L.stamp(t)],this._requestRedraw(t)},_updateGraphic:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(t.options.dashArray){var i,e=t.options.dashArray.split(","),o=[];for(i=0;i<e.length;i++)o.push(Number(e[i]));t.options._dashArray=o}},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||L.Util.requestAnimFrame(this._redraw,this))},_extendRedrawBounds:function(t){var i=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new L.Bounds,this._redrawBounds.extend(t._pxBounds.min.subtract([i,i])),this._redrawBounds.extend(t._pxBounds.max.add([i,i]))},_redraw:function(){this._redrawRequest=null;var t=this._map.getZoom();return this.options.maxZoom&&t>this.options.maxZoom||t<this.options.minZoom?void this._clear():(this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),void(this._redrawBounds=null))},_clear:function(){var t=this._redrawBounds;if(L.Browser.ielt9)$(this._ctx).empty();else if(t){var i=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,i.x,i.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,i=this._redrawBounds;if(L.Browser.ielt9){this._drawing=!0;for(var e=this._drawFirst;e;e=e.next)t=e.graphic,(!i||t._pxBounds&&t._pxBounds.intersects(i))&&t._updateGraphic();this._drawing=!1}else{if(this._ctx.save(),i){var o=i.getSize();this._ctx.beginPath(),this._ctx.rect(i.min.x,i.min.y,o.x,o.y),this._ctx.clip()}this._drawing=!0;for(var e=this._drawFirst;e;e=e.next)t=e.graphic,(!i||t._pxBounds&&t._pxBounds.intersects(i))&&t._updateGraphic();this._drawing=!1,this._ctx.restore()}},_onClick:function(t){this._map.eachLayer(function(i){i instanceof L.GraphicsLayer&&i._onClickHandler(t)})},_onClickHandler:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var i=this._map.getZoom();if(this.options.maxZoom&&i>this.options.maxZoom||i<this.options.minZoom)return void this._clear();for(var e,o,n=this._map.mouseEventToLayerPoint(t),s=this._drawFirst;s;s=s.next)e=s.graphic,e.options.interactive&&e._containsPoint(n)&&!this._map._draggableMoved(e)&&(o=e);o&&(L.DomEvent._fakeStop(t),this._fireEvent([o],t))}},_onMouseMove:function(t){this._map.eachLayer(function(i){i instanceof L.GraphicsLayer&&i._onMouseMoveHandler(t)})},_onMouseMoveHandler:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var i=this._map.getZoom();if(this.options.maxZoom&&i>this.options.maxZoom||i<this.options.minZoom)return void this._clear();var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){this._map.eachLayer(function(i){i instanceof L.GraphicsLayer&&i._handleMouseOutHandler(t)})},_handleMouseOutHandler:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var i=this._map.getZoom();if(this.options.maxZoom&&i>this.options.maxZoom||i<this.options.minZoom)return void this._clear();var e=this._hoveredGraphic;e&&(L.DomUtil.removeClass(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredGraphic=null)}},_handleMouseHover:function(t,i){for(var e,o,n=this._drawFirst;n;n=n.next)e=n.graphic,e.options.interactive&&e._containsPoint(i)&&(o=e);o!==this._hoveredGraphic&&(this._handleMouseOut(t),o&&(L.DomUtil.addClass(this._container,"leaflet-interactive"),this._fireEvent([o],t,"mouseover"),this._hoveredGraphic=o)),this._hoveredGraphic&&this._fireEvent([this._hoveredGraphic],t)},_fireEvent:function(t,i,e){this._map._fireDOMEvent(i,e||i.type,t)},bringToFront:function(){return this._map&&(L.DomUtil.toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(L.DomUtil.toBack(this._container),this._setAutoZIndex(Math.min)),this},_setAutoZIndex:function(t){for(var i,e=this.getPane().children,o=-t(-(1/0),1/0),n=0,s=e.length;n<s;n++)i=e[n].style.zIndex,e[n]!==this._container&&i&&(o=t(o,+i));isFinite(o)&&(this.options.zIndex=o+t(-1,1),this._updateZIndex())},_updateZIndex:function(){this._container&&this.options.zIndex!==undefined&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_bringToFront:function(t){var i=t._order,e=i.next,o=i.prev;
e&&(e.prev=o,o?o.next=e:e&&(this._drawFirst=e),i.prev=this._drawLast,this._drawLast.next=i,i.next=null,this._drawLast=i,this._requestRedraw(t))},_bringToBack:function(t){var i=t._order,e=i.next,o=i.prev;o&&(o.next=e,e?e.prev=o:o&&(this._drawLast=o),i.prev=null,i.next=this._drawFirst,this._drawFirst.prev=i,this._drawFirst=i,this._requestRedraw(t))},whenReady:function(t,i){return this._map&&this._map._loaded?t.call(i||this,{target:this}):this._map&&this._map.on("load",t,i),this},removeAll:function(){for(var t in this._graphicsProvider){var i=this._graphicsProvider[t];i.remove()}this._update(),this.on("update",this._updateGraphics,this),this._draw()},addGeoJson:function(geojson,options){try{geojson=eval("("+geojson+")")}catch(e){geojson=eval(geojson)}geojson=L.GeoJsonUtil.decode(geojson);var features=L.Util.isArray(geojson)?geojson:geojson.features,i,len,feature;if(null==options&&(options={}),features){for(i=0,len=features.length;i<len;i++)feature=features[i],(feature.geometries||feature.geometry||feature.features||feature.coordinates)&&this.addGeoJson(feature,options);return this}if(options.filter&&!options.filter(geojson))return this;var geometry=L.GeoJsonUtil.geometryToLayer(geojson,options);if(geometry instanceof Array)for(var i=0;i<geometry.length;i++){var attributes=geojson.properties;null==attributes&&(attributes={}),geojson.id&&(attributes.id=geojson.id);var gra=L.graphic(geometry[i],options.symbol,attributes).addTo(this);options.onEachGraphic&&options.onEachGraphic(gra)}else{var attributes=geojson.properties;null==attributes&&(attributes={}),geojson.id&&(attributes.id=geojson.id);var gra=L.graphic(geometry,options.symbol,attributes).addTo(this);options.onEachGraphic&&options.onEachGraphic(gra)}}}),L.graphicsLayer=function(t){return new L.GraphicsLayer(t)},L.NBGraphicsLayer=L.GraphicsLayer,L.nbGraphicsLayer=L.graphicsLayer,L.RRServiceLayer=L.BaseLayer.extend({options:{minZoom:0,maxZoom:18,maxNativeZoom:null,minNativeZoom:null,subdomains:"abc",errorUrl:"",zoomOffset:0,zoomReverse:!1,detectRetina:!1,pane:"featurePane",crossOrigin:!1},initialize:function(t,i){this._url=t,i=L.setOptions(this,i)},setUrl:function(t,i){return this._url=t,i||this.redraw(),this},_createImage:function(t,i,e){var o=this.getImageUrl();if(e&&e.src==o)return null;var n=L.DomUtil.create("img","leaflet-zoom-animated",t);return L.DomEvent.on(n,"load",L.bind(this._imageOnLoad,this,i,n)),L.DomEvent.on(n,"error",L.bind(this._imageOnError,this,i,n)),this.options.crossOrigin&&(n.crossOrigin=""),n.alt="",n.setAttribute("role","presentation"),n.src=o,n},getImageUrl:function(){var t=this._map||this._mapToAdd,i=t.getSize(),e=t.getBounds(),o={XMIN:e.getWest(),YMIN:e.getSouth(),XMAX:e.getEast(),YMAX:e.getNorth(),W:i.x,H:i.y};return L.Util.template(this._url,L.extend(o,this.options))},_imageOnLoad:function(t,i){L.Browser.ielt9?setTimeout(L.bind(t,this,null,i),0):t(null,i)},_imageOnError:function(t,i,e){var o=this.options.errorUrl;o&&i.src!==o&&(i.src=o),t(e,i)},_abortLoading:function(){this._newImage&&(this._newImage.el.onload=L.Util.falseFn,this._newImage.el.onerror=L.Util.falseFn,this._newImage.el.src=L.Util.emptyImageUrl,this._newImage&&this._newImage.el&&(L.Browser.ielt9?$(this._newImage.el).remove():L.DomUtil.remove(this._newImage.el)),this._newImage=null)},_updateContentOpacity:function(){this._newImage&&L.DomUtil.setOpacity(this._newImage.el,1|this.options.opacity),this._oldImage&&L.DomUtil.setOpacity(this._oldImage.el,1|this.options.opacity)},_removeContent:function(){this._newImage&&(L.Browser.ielt9?$(this._newImage.el).remove():L.DomUtil.remove(this._newImage.el),this._newImage=null),this._oldImage&&(L.Browser.ielt9?$(this._oldImage.el).remove():L.DomUtil.remove(this._oldImage.el),this._oldImage=null)},_setZoomTransforms:function(t,i){if(this._oldImage){var e=this._map.getZoomScale(i,this._oldImage.zoom),o=this._oldImage.origin.add(this._oldImage.position).multiplyBy(e).subtract(this._map._getNewPixelOrigin(t,i)).round();L.Browser.any3d?L.DomUtil.setTransform(this._oldImage.el,o,e):L.DomUtil.setPosition(this._oldImage.el,o)}},_update:function(t){var i=this._map;if(i){var e=i.getZoom();if(t===undefined&&(t=i.getCenter()),this._tileZoom!==undefined){if(Math.abs(e-this._tileZoom)>1)return void this._setView(t,e);this._loading||(this._loading=!0,this.fire("loading")),this._addImage(this._container)}}},_initImage:function(t){var i=this._map.getSize();L.Browser.ielt9||(t.el.style.width=i.x+"px",t.el.style.height=i.y+"px"),t.el.onselectstart=L.Util.falseFn,t.el.onmousemove=L.Util.falseFn;var e=this._getPosition();t.position=e,this._oldPosition=e,L.Browser.any3d?L.DomUtil.setTransform(t.el,e,1):($(t.el).css("position","absolute"),L.DomUtil.setPosition(t.el,e)),L.Browser.ielt9&&this.options.opacity<1&&L.DomUtil.setOpacity(t.el,this.options.opacity),L.Browser.android&&!L.Browser.android23&&(t.el.style.WebkitBackfaceVisibility="hidden")},_addImage:function(t){var i=this._createImage(t,L.bind(this._imageReady,this),this._newImage);i&&(this._abortLoading&&this._abortLoading(),this._newImage={el:i,zoom:this._tileZoom,origin:this._origin},this._initImage(this._newImage),this.fire("imageloadstart",{image:this._newImage}))},_imageReady:function(t,i){var e=this._newImage;this._newImage&&this._newImage.el===i&&(this._newImage=null,this._map&&(t&&this.fire("imageerror",{error:t,image:i}),i&&(t||(this._oldImage&&(L.Browser.ielt9?$(this._oldImage.el).remove():L.DomUtil.remove(this._oldImage.el),this._oldImage=null),this._oldImage=e,this._tileZoom!=this._oldImage.zoom&&this._setZoomTransforms(this._map.getCenter(),this._map.getZoom()),this.fire("imageload",{image:i})),this._loading=!1,this.fire("load"))))}}),L.rrServiceLayer=function(t,i){return new L.RRServiceLayer(t,i)},L.NBRRServiceLayer=L.RRServiceLayer,L.nbRRServiceLayer=L.rrServiceLayer,L.ThemeticLayer=L.RRServiceLayer.extend({options:{pane:"tilePane",layerIndex:"all",whereClause:""},initialize:function(t,i){this._baseLayer=t;var e=t+"/export?bboxSR=4490&format=png8&dpi=96&f=image&imageSR=4490&transparent=true&layers={layerIndex}&layerDefs={{whereClause}}&size={W},{H}&bbox={XMIN},{YMIN},{XMAX},{YMAX}";L.RRServiceLayer.prototype.initialize.call(this,e,i)},setLayerIndex:function(t){this.options.layerIndex=t,this.refresh()},setWhereClause:function(t,i){""!=i?this.options.whereClause=t+':"'+i+'"':this.options.whereClause="",this.redraw()},queryByFieldValue:function(t,i,e,o){var n=this,s=this._baseLayer+"/find?sr=4326&contains=true&returnGeometry=true&returnZ=false&returnM=false&layers={layerIndex}&searchText={fieldValue}&searchFields={fieldName}&f=json",r={layerIndex:t,fieldName:i,fieldValue:e};s=L.Util.template(s,r),$.ajax({url:s,type:"GET",dataType:"jsonp",success:function(t){o(n._data2GraphicsByFieldValue(t))}})},queryByGeometry:function(t,i,e,o){var n=this,s=this._baseLayer+"/{layerIndex}/query?where={whereClause}&geometryType={geometryType}&geometry={geometry}&returnGeomtry=true&outFields=*&spatialRel=esriSpatialRelIntersects&f=json",r={layerIndex:t,whereClause:i},a="",h="";e instanceof L.MapPoint?(h="esriGeometryPoint",a='{"x":'+e.x+',"y":'+e.y+"}"):e instanceof L.Extent&&(h="esriGeometryEnvelope",a='{"xmin":'+e.xmin+',"ymin":'+e.ymin+',"xmax":'+e.xmax+',"ymax":'+e.ymax+"}"),r.geometryType=h,r.geometry=a,s=L.Util.template(s,r),$.ajax({url:s,type:"GET",dataType:"jsonp",success:function(t){o(n._data2Graphics(t))}})},_data2Graphics:function(t){var i=[],e=t.geometryType;if(t.features)for(var o=0;o<t.features.length;o++){var n=L.graphic(),s=t.features[o];switch(n.attributes=s.attributes,e){case"esriGeometryPolygon":n._geometry=L.polygon(s.geometry.rings),n._symbol=L.simpleFillSymbol("circle")}i.push(n)}return i},_data2GraphicsByFieldValue:function(t){var i=[];if(t&&t.results.length>0)for(var e=0;e<t.results.length;e++){var o=L.graphic(),n=t.results[e];o.attributes=n.attributes;var s=n.geometryType;switch(s){case"esriGeometryPolygon":o._geometry=L.polygon(n.geometry.rings),o._symbol=L.simpleFillSymbol("circle")}i.push(o)}return i}}),L.themeticLayer=function(t,i){return new L.ThemeticLayer(t,i)},L.Geometry=L.Evented.extend({options:{},initialize:function(t){L.setOptions(this,t)},project:function(t){return null},_clipPoints:function(t){},_simplifyPoints:function(t){},getCenter:function(){return this}}),L.geometry=function(t){return new L.Geometry(t)},L.NBGeometry=L.Geometry,L.nbGeometry=L.geometry,L.MapPoint=L.Geometry.extend({options:{},initialize:function(t,i,e){this.x=0,this.y=0,t&&(this.x=t),i&&(this.y=i),e&&(this.z=e)},getX:function(){return this.x},getY:function(){return this.y},setX:function(t){this.x=t},setY:function(t){this.y=t},setZ:function(t){this.z=t},getLng:function(){return this.x},getLat:function(){return this.y},setLng:function(t){this.x=t},setLat:function(t){this.y=t},getLatLng:function(){return L.latLng(this.y,this.x,this.z)},fromLatLng:function(t){this.x=t.lng,this.y=t.lat},project:function(t){return this._screenPoints=t.latLngToLayerPoint(this.getLatLng()),this._pxBounds=new L.Bounds(this._screenPoints,this._screenPoints),this._screenPoints},getCenter:function(){return this},equals:function(t,i){if(!t)return!1;t=L.mapPoint(t);var e=Math.max(Math.abs(this.x-t.x),Math.abs(this.y-t.y));return e<=(i===undefined?1e-9:i)}}),L.mapPoint=function(t,i,e){if(t instanceof L.MapPoint)return t;if(L.Util.isArray(t)&&"object"!=typeof t[0])return 3===t.length?new L.MapPoint(t[0],t[1],t[2]):2===t.length?new L.MapPoint(t[0],t[1]):null;if(t===undefined||null===t)return t;if("object"==typeof t){var o="x"in t?t.x:t.lng,n="y"in t?t.y:t.lat;return o=o||0,n=n||0,new L.MapPoint(o,n)}return i===undefined?null:new L.MapPoint(t,i,e)},L.LatLng.prototype.getMapPoint=function(){return L.mapPoint(this.lng,this.lat,this.alt)},L.Map.include({setCenterPoint:function(t,i,e){return this.setView(L.mapPoint(t).getLatLng(),i,e),this},getCenterPoint:function(){this.getCenter().getMapPoint()}}),L.Geometry.include({toPoint:function(t){return null}}),L.DivOverlay.include({setMapPoint:function(t){return this.setLatLng(L.mapPoint(t).getLatLng()),this},getMapPoint:function(){return this._latlng.getMaPoint()}}),L.Popup.include({setMapPoint:function(t){return this.setLatLng(L.mapPoint(t).getLatLng()),this},getMapPoint:function(){return this._latlng.getMaPoint()}}),L.Tooltip.include({setMapPoint:function(t){return this.setLatLng(L.mapPoint(t).getLatLng()),this},getMapPoint:function(){return this._latlng.getMaPoint()}}),L.NBMapPoint=L.MapPoint,L.nbMapPoint=L.mapPoint,L.Polyline=L.Geometry.extend({options:{},initialize:function(t,i){L.setOptions(this,i),this._setPoints(t)},getPoints:function(){return this._latlngs},setPoints:function(t){return this._setPoints(t),this},_setPoints:function(t){this._bounds=new L.LatLngBounds,this._latlngs=this._convertMapPoints(t)},closestPoint:function(t){for(var i,e,o=1/0,n=null,s=L.LineUtil._sqClosestPointOnSegment,r=0,a=this._parts.length;r<a;r++)for(var h=this._parts[r],l=1,p=h.length;l<p;l++){i=h[l-1],e=h[l];var u=s(t,i,e,!0);u<o&&(o=u,n=s(t,i,e))}return n&&(n.distance=Math.sqrt(o)),n},getCenter:function(t){var i,e,o,n,s,r,a,h=this._rings[0],l=h.length;if(!l)return null;for(i=0,e=0;i<l-1;i++)e+=h[i].distanceTo(h[i+1])/2;if(0===e)return t.layerPointToLatLng(h[0]).getMapPoint();for(i=0,n=0;i<l-1;i++)if(s=h[i],r=h[i+1],o=s.distanceTo(r),n+=o,n>e)return a=(n-e)/o,t.layerPointToLatLng([r.x-a*(r.x-s.x),r.y-a*(r.y-s.y)]).getMapPoint()},getBounds:function(){return this._bounds},addPoint:function(t,i){return i=i||this._defaultShape(),t=L.mapPoint(t),i.push(t),this._bounds.extend(t.getLatLng()),this},_defaultShape:function(){return L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]},_convertMapPoints:function(t){for(var i=[],e=L.Polyline._flat(t),o=0,n=t.length;o<n;o++)e?(i[o]=L.mapPoint(t[o]),this._bounds.extend(i[o].getLatLng())):i[o]=this._convertMapPoints(t[o]);return i},project:function(t){var i=new L.Bounds;return this._rings=[],this._projectMapPoints(t,this._latlngs,this._rings,i),this._screenPoints=this._rings,this._pxBounds=i,this._screenPoints},_projectMapPoints:function(t,i,e,o){var n,s,r=i[0]instanceof L.MapPoint,a=i.length;if(r){for(s=[],n=0;n<a;n++)s[n]=t.latLngToLayerPoint(i[n].getLatLng()),o.extend(s[n]);e.push(s)}else for(n=0;n<a;n++)this._projectMapPoints(t,i[n],e,o)},_clipPoints:function(t){var i=t._graphicsLayer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(i)){if(this.options.noClip)return void(this._parts=this._rings);var e,o,n,s,r,a,h,l=this._parts;for(e=0,n=0,s=this._rings.length;e<s;e++)for(h=this._rings[e],o=0,r=h.length;o<r-1;o++)a=L.LineUtil.clipSegment(h[o],h[o+1],i,o,!0),a&&(l[n]=l[n]||[],l[n].push(a[0]),a[1]===h[o+1]&&o!==r-2||(l[n].push(a[1]),n++))}},_simplifyPoints:function(){for(var t=this._parts,i=this.options.smoothFactor,e=0,o=t.length;e<o;e++)t[e]=L.LineUtil.simplify(t[e],i)}}),L.polyline=function(t,i){return new L.Polyline(t,i)},L.Polyline._flat=function(t){return!L.Util.isArray(t[0])||"object"!=typeof t[0][0]&&"undefined"!=typeof t[0][0]},L.NBPolyline=L.Polyline,L.nbPolyline=L.polyline,L.Polygon=L.Polyline.extend({getCenter:function(t){var i,e,o,n,s,r,a,h,l,p=this._rings[0],u=p.length;if(!u)return null;for(r=a=h=0,i=0,e=u-1;i<u;e=i++)o=p[i],n=p[e],s=o.y*n.x-n.y*o.x,a+=(o.x+n.x)*s,h+=(o.y+n.y)*s,r+=3*s;return l=0===r?p[0]:[a/r,h/r],t.layerPointToLatLng(l).getMapPoint()},_convertMapPoints:function(t){var i=L.Polyline.prototype._convertMapPoints.call(this,t),e=i.length;return e>=2&&i[0]instanceof L.MapPoint&&i[0].equals(i[e-1])&&i.pop(),i},_setPoints:function(t){L.Polyline.prototype._setPoints.call(this,t),L.Polyline._flat(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return L.Polyline._flat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(t){var i=t._graphicsLayer._bounds,e=t._symbol.options.weight||1,o=new L.Point(e,e);if(i=new L.Bounds(i.min.subtract(o),i.max.add(o)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(i)){if(t.options.noClip)return void(this._parts=this._rings);for(var n,s=0,r=this._rings.length;s<r;s++)n=L.PolyUtil.clipPolygon(this._rings[s],i,!0),n.length&&this._parts.push(n)}}}),L.polygon=function(t,i){return new L.Polygon(t,i)},L.NBPolygon=L.Polygon,L.nbPolygon=L.polygon,L.Extent=L.Geometry.extend({options:{},initialize:function(t,i,e,o){this.xmin=0,this.ymin=0,this.xmax=0,this.ymax=0;var n=L.mapPoint(t);n?(this.xmin=n.x,this.ymin=n.y):t&&(this.xmin=t),n=L.mapPoint(i),n?(this.xmax=n.x,this.ymax=n.y):i&&(this.ymin=i),e&&(this.xmax=e),o&&(this.ymax=o);var s=0;this.xmin>this.xmax&&(s=this.xmin,this.xmin=this.xmax,this.xmax=s),this.ymin>this.ymax&&(s=this.ymin,this.ymin=this.ymax,this.ymax=s)},getXmin:function(){return this.xmin},getYmin:function(){return this.ymin},getXmax:function(){return this.xmax},getYmax:function(){return this.ymax},setXmin:function(t){this.xmin=t},setYmin:function(t){this.ymin=t},setXmax:function(t){this.xmax=t},setYmax:function(t){this.ymax=t},getLowerCorner:function(){return L.mapPoint(this.xmin,this.ymin)},getUpperCorner:function(){return L.mapPoint(this.xmax,this.ymax)},extend:function(t){return t?t instanceof L.MapPoint?(this.xmin>t.getX()&&(this.xmin=t.getX()),this.xmax<t.getX()&&(this.xmax=t.getX()),this.ymin>t.getY()&&(this.ymin=t.getY()),this.ymax<t.getY()&&(this.ymax=t.getY()),this):t instanceof L.Extent?(this.xmin>t.getXmin()&&(this.xmin=t.getXmin()),this.xmax<t.getXmax()&&(this.xmax=t.getXmax()),this.ymin>t.getYmin()&&(this.ymin=t.getYmin()),this.ymax<t.getYmax()&&(this.ymax=t.getYmax()),this):this:this},expand:function(t){var i=this.xmax-this.xmin,e=this.ymax-this.ymin;i*=t,e*=t;var o=this.xmin+i/2,n=this.xmax-i/2,s=this.ymin+e/2,r=this.ymax-e/2;return L.extent(o,s,n,r)},getCenter:function(){var t=(this.xmin+this.xmax)/2,i=(this.ymin+this.ymax)/2;return L.mapPoint(t,i)},contains:function(t){return!!t&&(t instanceof L.MapPoint?t.x<this.xmax&&t.x>this.xmin&&t.y<this.ymax&&t.y>this.ymin:t instanceof L.Extent?t.xmin>=this.xmin&&t.xmax<=this.xmax&&t.ymin>=this.ymin&&t.ymax<=this.ymax:void 0)},intersects:function(t){var i=this.getLowerCorner(),e=this.getUpperCorner(),o=t.getLowerCorner(),n=t.getUpperCorner(),s=n.x>=i.x&&o.x<=e.x;return yIntersects=n.y>=i.y&&o.y<=e.y,s&&yIntersects},overlaps:function(t){var i=this.getLowerCorner(),e=this.getUpperCorner(),o=t.getLowerCorner(),n=t.getUpperCorner(),s=n.x>i.x&&o.x<e.x;return yIntersects=n.y>i.y&&o.y<e.y,s&&yIntersects},equals:function(t){return!!t&&(this.xmin==t.xmin&&this.xmax==t.xmin&&this.ymin==t.ymin&&this.ymax==t.ymin)},getLatLngBounds:function(){var t=L.latLng(this.xmin,this.ymin),i=L.latLng(this.xmax,this.ymax);return L.latLngBounds(t,i)},fromLatLngBounds:function(t){var i=t.getSouthWest(),e=t.getNorthEast();return this.xmin=i.lng,this.ymin=i.lat,this.xmax=e.lng,this.ymax=e.lat,this},toPolygon:function(){return L.polygon([[this.xmin,this.ymin],[this.xmin,this.ymax],[this.xmax,this.ymax],[this.xmax,this.ymin],[this.xmin,this.ymin]])}}),L.extent=function(t,i,e,o){return t instanceof L.Extent?t:new L.Extent(t,i,e,o)},L.LatLng.prototype.getExtent=function(){return L.extent(this.lng,this.lat,this.lng,this.lat)},L.LatLngBounds.prototype.getExtent=function(){return L.extent(this._southWest.lng,this._southWest.lat,this._northEast.lng,this._northEast.lat)},L.MapPoint.include({getExtent:function(){return L.extent(this.x,this.y,this.x,this.y)}}),L.Polyline.include({getExtent:function(){var t=this.getPoints();if(!t||!(t instanceof Array)||t.length<1)return null;var i;if(t[0]instanceof Array&&t[0].length>0&&t[0][0]instanceof L.MapPoint){i=t[0][0].getExtent();for(var e=0;e<t.length;e++)for(var o=0;o<t[e].length;o++)i||(i=t[e][o].getExtent()),i.extend(t[e][o])}if(t[0]instanceof L.MapPoint){i=t[0].getExtent();for(var e=0;e<t.length;e++)i.extend(t[e])}return i}}),L.Polygon.include({getExtent:function(){var t=this.getPoints();if(!t||!(t instanceof Array)||t.length<1)return null;var i;if(t[0]instanceof Array&&t[0].length>0&&t[0][0]instanceof L.MapPoint){i=t[0][0].getExtent();for(var e=0;e<t.length;e++)for(var o=0;o<t[e].length;o++)i||(i=t[e][o].getExtent()),i.extend(t[e][o])}if(t[0]instanceof L.MapPoint){i=t[0].getExtent();for(var e=0;e<t.length;e++)i.extend(t[e])}return i}}),L.Map.include({setExtent:function(t,i){return this.fitBounds(t.getLatLngBounds(),i)},getExtent:function(){return this.getBounds().getExtent()}}),L.NBExtent=L.Extent,L.nbExtent=L.extent,L.Symbol=L.Evented.extend({options:{},initialize:function(t){L.setOptions(this,t)},_fillStroke:function(t,i){var e=this.options;e.fill&&(t.globalAlpha=e.fillOpacity,t.fillStyle=e.fillColor||e.color,t.fill(e.fillRule||"evenodd")),e.stroke&&0!==e.weight&&(t.globalAlpha=e.opacity,t.lineWidth=e.weight,t.strokeStyle=e.color,t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.stroke())}}),L.symbol=function(t){return new L.Symbol(t)},L.NBSymbol=L.Symbol,L.nbSymbol=L.symbol,L.PictureFillSymbol=L.Symbol.extend({options:{fill:!0,fillOpacity:.5,color:"#3388ff",fillRule:"evenodd",stroke:!0,weight:3,opacity:1,lineCap:"round",lineJoin:"round"},initialize:function(t){L.setOptions(this,t)},draw:function(t,i){this._src=this.options.image;var e=this;if(this._img)this._img.complete&&this.drawImage(t,i,e);else{var o=new Image;this._img=o,o.onload=function(){e.drawImage(t,i,e)},this._img.src=this._src}},drawImage:function(t,i,e){var o,n,s,r,a=i._geometry._parts,h=a.length;if(L.Browser.ielt9){var l=e._img,p=(l.width,l.height,L.DomUtil.createVML("stroke"));p.opacity=this.options.opacity,p.joinstyle=this.options.lineJoin,p.color=this.options.color,p.weight=this.options.weight;var u=L.DomUtil.createVML("fill");for(u.opacity=this.options.fillOpacity,u.type="tile",u.src=l.src,o=0;o<h;o++){var c=L.DomUtil.createVML("polyline");L.stamp(c);var _="";for(n=0,s=a[o].length;n<s;n++)_+=" "+a[o][n].x+","+a[o][n].y;a[o][0].x!=a[o][s-1].x&&a[o][0].y!=a[o][s-1].y&&(_+=" "+a[o][0].x+","+a[o][0].y),c.appendChild(p),c.appendChild(u),c.points=_,c.stroked=this.options.stroke,c.filled=this.options.fill,t.appendChild(c)}}else{for(t.beginPath(),t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),o=0;o<h;o++){for(n=0,s=a[o].length;n<s;n++)r=a[o][n],t[n?"lineTo":"moveTo"](r.x,r.y);t.closePath()}e._fillStroke(t,e)}},_fillStroke:function(t,i){var e=i.options,o=i._img;if(e.fill){var n=t.createPattern(o,"repeat");t.globalAlpha=e.fillOpacity,t.fillStyle=n,t.fill()}e.stroke&&0!==e.weight&&(t.globalAlpha=e.opacity,t.lineWidth=e.weight,t.strokeStyle=e.color,t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.stroke())}}),L.pictureFillSymbol=function(t){return new L.PictureFillSymbol(t)},L.NBPictureFillSymbol=L.PictureFillSymbol,L.nbPictureFillSymbol=L.pictureFillSymbol,L.PictureMarkerSymbol=L.Symbol.extend({options:{fill:!0,fillOpacity:.2,color:"#3388ff",fillRule:"evenodd",stroke:!0,weight:3,width:0,opacity:1,lineCap:"round",lineJoin:"round"},initialize:function(t){L.setOptions(this,t)},measureBounds:function(t){var i=this.options.offset||L.point(0,0),e=(this.options.width||50)/2,o=(this.options.height||50)/2,n=t._pxBounds;return n=L.bounds(n.min.add(i).subtract([e,o]),n.max.add(i).add([e,o]))},draw:function(t,i){this._ctx=t,this._graphic=i;var e=this;if(this._src=this.options.image,this._src)if(this._img)this._img.complete&&this.drawImage(t,e);else{var o=new Image;this._img=o,o.onload=function(){e.drawImage(t,e)},this._img.src=this._src}},drawImage:function(t,i){var t=i._ctx,e=i._graphic,o=i._img,n=o.width,s=o.height,r=this.options.offset||L.point(0,0),a=e._screenPoints.add(r);i.options.width=i.options.width||n,i.options.height=i.options.height||s;var h=i.options.width,l=i.options.height;if(L.Browser.ielt9){var p=L.DomUtil.createVML("image");L.stamp(p),p.src=o.src,p.style.left=a.x,p.style.top=a.y,p.style.width=h,p.style.height=l,t.appendChild(p)}else t.beginPath(),t.drawImage(o,a.x-h/2,a.y-l/2,h,l)}}),L.pictureMarkerSymbol=function(t){return new L.PictureMarkerSymbol(t)},L.NBPictureMarkerSymbol=L.PictureMarkerSymbol,L.nbPictureMarkerSymbol=L.pictureMarkerSymbol,L.SimpleFillSymbol=L.Symbol.extend({options:{fill:!0,fillOpacity:.2,fillColor:"#3388ff",fillRule:"evenodd",color:"#3388ff",stroke:!0,weight:3,opacity:1,lineCap:"round",lineJoin:"round"},initialize:function(t){L.setOptions(this,t)},draw:function(t,i){var e,o,n,s,r=i._geometry._parts,a=r.length;if(L.Browser.ielt9){var h=L.DomUtil.createVML("stroke");h.opacity=this.options.opacity,h.joinstyle=this.options.lineJoin,h.color=this.options.color,h.weight=this.options.weight;var l=L.DomUtil.createVML("fill");for(l.opacity=this.options.fillOpacity,l.color=this.options.color,e=0;e<a;e++){var p=L.DomUtil.createVML("polyline");L.stamp(p);var u="";for(o=0,n=r[e].length;o<n;o++)u+=" "+r[e][o].x+","+r[e][o].y;r[e][0].x!=r[e][n-1].x&&r[e][0].y!=r[e][n-1].y&&(u+=" "+r[e][0].x+","+r[e][0].y),p.appendChild(h),p.appendChild(l),p.points=u,p.stroked=this.options.stroke,p.filled=this.options.fill,t.appendChild(p)}}else{for(t.beginPath(),t.setLineDash&&t.setLineDash(this.options&&this.options._dashArray||[]),e=0;e<a;e++){for(o=0,n=r[e].length;o<n;o++)s=r[e][o],t[o?"lineTo":"moveTo"](s.x,s.y);t.closePath()}this._fillStroke(t,this)}},_fillStroke:function(t,i){var e=this.options;e.fill&&(t.globalAlpha=e.fillOpacity,t.fillStyle=e.fillColor,t.fill(e.fillRule||"evenodd")),e.stroke&&0!==e.weight&&(t.globalAlpha=e.opacity,t.lineWidth=e.weight,t.strokeStyle=e.color,t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.stroke())}}),L.simpleFillSymbol=function(t){return new L.SimpleFillSymbol(t)},L.NBSimpleFillSymbol=L.SimpleFillSymbol,L.nbSimpleFillSymbol=L.simpleFillSymbol,L.SimpleLineSymbol=L.Symbol.extend({options:{fill:!1,fillOpacity:.2,color:"#3388ff",fillRule:"evenodd",stroke:!0,weight:3,opacity:1,lineCap:"round",lineJoin:"round"},initialize:function(t){L.setOptions(this,t)},draw:function(t,i){var e,o,n,s,r=i._geometry._parts,a=r.length;if(L.Browser.ielt9){var h=L.DomUtil.createVML("stroke");for(h.opacity=this.options.opacity,h.joinstyle=this.options.lineJoin,h.color=this.options.color,h.weight=this.options.weight,e=0;e<a;e++){var l=L.DomUtil.createVML("polyline");L.stamp(l);var p="";for(o=0,n=r[e].length;o<n;o++)p+=" "+r[e][o].x+","+r[e][o].y;l.appendChild(h),l.points=p,l.stroked=this.options.stroke,l.filled=!1,t.appendChild(l)}}else{for(t.beginPath(),t.setLineDash&&t.setLineDash(this.options&&this.options._dashArray||[]),e=0;e<a;e++)for(o=0,n=r[e].length;o<n;o++)s=r[e][o],t[o?"lineTo":"moveTo"](s.x,s.y);this._fillStroke(t,this)}},_fillStroke:function(t,i){var e=this.options;e.fill&&(t.globalAlpha=e.fillOpacity,t.fillStyle=e.fillColor||e.color,t.fill(e.fillRule||"evenodd")),e.stroke&&0!==e.weight&&(t.globalAlpha=e.opacity,t.lineWidth=e.weight,t.strokeStyle=e.color,t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.stroke())}}),L.simpleLineSymbol=function(t){return new L.SimpleLineSymbol(t)},L.NBSimpleLineSymbol=L.SimpleLineSymbol,L.nbSimpleLineSymbol=L.simpleLineSymbol,L.SimpleMarkerSymbol=L.Symbol.extend({options:{fill:!0,fillOpacity:.2,color:"#3388ff",fillRule:"evenodd",stroke:!0,weight:3,opacity:1,lineCap:"round",lineJoin:"round"},initialize:function(t){L.setOptions(this,t)},measureBounds:function(t){var i=this.options.offset||L.point(0,0),e=this.options.width/2,o=this.options.height/2,n=t._pxBounds;return n=L.bounds(n.min.add(i).subtract([e,o]),n.max.add(i).add([e,o]))},draw:function(t,i){switch(this.options.style){case"triangle":L.Browser.ielt9?this._updateTriangle_ielt9(t,i):this._updateTriangle(t,i);break;case"circle":L.Browser.ielt9?this._updateCircle_ielt9(t,i):this._updateCircle(t,i);break;case"x":L.Browser.ielt9?this._updateX_ielt9(t,i):this._updateX(t,i);break;case"cross":L.Browser.ielt9?this._updateCross_ielt9(t,i):this._updateCross(t,i);break;case"diamond":L.Browser.ielt9?this._updateDiamond_ielt9(t,i):this._updateDiamond(t,i);break;case"square":L.Browser.ielt9?this._updateSquare_ielt9(t,i):this._updateSquare(t,i);break;default:L.Browser.ielt9?this._updateCircle_ielt9(t,i):this._updateCircle(t,i)}},_updateCircle:function(t,i){var e=this.options.offset||L.point(0,0),o=i._screenPoints.add(e),n=this.options.width/2,s=this.options.height/this.options.width;1!==s&&(t.save(),t.scale(1,s)),t.beginPath(),t.arc(o.x,o.y/s,n,0,2*Math.PI,!1),1!==s&&t.restore(),this._fillStroke(t,i)},_updateCircle_ielt9:function(t,i){var e=this.options.offset||L.point(0,0),o=i._screenPoints.add(e),n=this.options.width/2,s=(this.options.height/this.options.width,L.DomUtil.createVML("oval"));L.stamp(s);var r=this._createVmlStroke();s.appendChild(r);var a=this._createVmlFill();s.appendChild(a),s.stroked=this.options.stroke,s.style.left=o.x-n,s.style.top=o.y-n,s.style.width=this.options.width,s.style.height=this.options.width,t.appendChild(s)},_updateSquare:function(t,i){var e=this.options.offset||L.point(0,0),o=this.options.width,n=this.options.height,s=o/2,r=n/2,a=i._screenPoints.add(e).subtract([s,r]);t.beginPath(),t.moveTo(a.x,a.y),t.rect(a.x,a.y,o,n),this._fillStroke(t,i)},_updateSquare_ielt9:function(t,i){var e=this.options.offset||L.point(0,0),o=this.options.width,n=this.options.height,s=o/2,r=n/2,a=i._screenPoints.add(e).subtract([s,r]),h=L.DomUtil.createVML("rect");L.stamp(h);var l=this._createVmlStroke();h.appendChild(l);var p=this._createVmlFill();h.appendChild(p),h.stroked=this.options.stroke,h.style.left=a.x,h.style.top=a.y,h.style.width=o,h.style.height=n,t.appendChild(h)},_updateX:function(t,i){var e=this.options.offset||L.point(0,0),o=this.options.width,n=this.options.height,s=o/2,r=n/2,a=i._screenPoints.add(e).subtract([s,r]);t.beginPath(),t.moveTo(a.x,a.y),t.lineTo(a.x+o,a.y+n),t.moveTo(a.x+o,a.y),t.lineTo(a.x,a.y+n),this._fillStroke(t,i)},_updateX_ielt9:function(t,i){var e=this.options.offset||L.point(0,0),o=this.options.width,n=this.options.height,s=o/2,r=n/2,a=i._screenPoints.add(e).subtract([s,r]),h=L.DomUtil.createVML("shape");L.stamp(h);var l=this._createVmlStroke();h.appendChild(l),h.path="m 0,0 L 20,20 m 20,0 L 0,20",h.coordsize="20 20",h.stroked=this.options.stroke,h.style.left=a.x-s,h.style.top=a.y-r,h.style.width=o,h.style.height=n,t.appendChild(h)},_updateCross:function(t,i){var e=this.options.offset||L.point(0,0),o=this.options.width,n=this.options.height,s=o/2,r=n/2,a=i._screenPoints.add(e);t.beginPath(),t.moveTo(a.x-s,a.y),t.lineTo(a.x+s,a.y),t.moveTo(a.x,a.y-r),t.lineTo(a.x,a.y+r),this._fillStroke(t,i)},_updateCross_ielt9:function(t,i){var e=this.options.offset||L.point(0,0),o=this.options.width,n=this.options.height,s=o/2,r=n/2,a=i._screenPoints.add(e),h=L.DomUtil.createVML("shape");L.stamp(h);var l=this._createVmlStroke();h.appendChild(l),h.path="m 10,0 L 10,20 m 0,10 L 20,10",h.coordsize="20 20",h.stroked=this.options.stroke,h.style.left=a.x-s,h.style.top=a.y-r,h.style.width=o,h.style.height=n,t.appendChild(h)},_updateDiamond:function(t,i){var e=this.options.offset||L.point(0,0),o=this.options.width,n=this.options.height,s=o/2,r=n/2,a=i._screenPoints.add(e);t.beginPath(),t.moveTo(a.x-s,a.y),t.lineTo(a.x,a.y-r),t.lineTo(a.x+s,a.y),t.lineTo(a.x,a.y+r),t.closePath(),this._fillStroke(t,i)},_updateDiamond_ielt9:function(t,i){var e=this.options.offset||L.point(0,0),o=this.options.width,n=this.options.height,s=i._screenPoints.add(e),r=L.DomUtil.createVML("rect");L.stamp(r);var a=this._createVmlStroke();r.appendChild(a);var h=this._createVmlFill();r.appendChild(h),r.stroked=this.options.stroke,r.style.left=s.x,r.style.top=s.y,r.style.width=o/1.414,r.style.height=n/1.414,r.style.rotation=45,t.appendChild(r)},_updateTriangle:function(t,i){var e=this.options.offset||L.point(0,0),o=this.options.width,n=this.options.height,s=o/2,r=n/2,a=i._screenPoints.add(e);t.beginPath(),t.moveTo(a.x,a.y-r),t.lineTo(a.x+Math.sqrt(3)/2*s,a.y+r/2),t.lineTo(a.x-Math.sqrt(3)/2*s,a.y+r/2),t.closePath(),this._fillStroke(t,i)},_updateTriangle_ielt9:function(t,i){var e=this.options.offset||L.point(0,0),o=this.options.width,n=this.options.height,s=o/2,r=n/2,a=i._screenPoints.add(e),h=L.DomUtil.createVML("shape");L.stamp(h);var l=this._createVmlStroke();h.appendChild(l);var p=this._createVmlFill();h.appendChild(p),h.path="m 10,0 L 0,20,20,20,10,0 x e",h.coordsize="20 20",h.stroked=this.options.stroke,h.style.left=a.x-s,h.style.top=a.y-r,h.style.width=o,h.style.height=n,t.appendChild(h)},_fillStroke:function(t,i){var e=this.options;e.fill&&(t.globalAlpha=e.fillOpacity,t.fillStyle=e.fillColor,t.fill(e.fillRule||"evenodd")),e.stroke&&0!==e.weight&&(t.globalAlpha=e.opacity,t.lineWidth=e.weight,t.strokeStyle=e.color,t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.stroke())},_createVmlStroke:function(){var t=L.DomUtil.createVML("stroke");return t.opacity=this.options.opacity,t.joinstyle=this.options.lineJoin,t.color=this.options.color,t.weight=this.options.weight,t},_createVmlFill:function(){var t=L.DomUtil.createVML("fill");return t.opacity=this.options.fillOpacity,t.color=this.options.color,t}}),L.simpleMarkerSymbol=function(t){return new L.SimpleMarkerSymbol(t)},L.NBSimpleMarkerSymbol=L.SimpleMarkerSymbol,L.nbSimpleMarkerSymbol=L.simpleMarkerSymbol,L.TextSymbol=L.Symbol.extend({options:{text:"",fontSize:16,fontName:"Arial",color:"black"},initialize:function(t){L.setOptions(this,t)},measureBounds:function(t){var i=this.options.offset||L.point(0,0),e=this.options.fontSize||15,o=this.options.text||this.options.attributesname&&t._attributes&&t._attributes[this.options.attributesname]||"",n=t._graphicsLayer._ctx;L.Browser.ielt9||(n.font=e+"px sans-serif");var s=L.Browser.ielt9?e*o.length:n.measureText(o).width,r=e/2,a=t._pxBounds;return a=L.bounds(a.min.add(i).subtract([0,r]),a.max.add(i).add([s,r]))},draw:function(t,i){var e=i._screenPoints,o=this.options.fontSize||15;if(!(e instanceof L.Point)){var n=i._graphicsLayer._map,s=i._geometry.getCenter(n);e=n.latLngToLayerPoint(s.getLatLng())}var r=this.options.text||this.options.attributesname&&i._attributes&&i._attributes[this.options.attributesname]||"";if(""!=r)if(L.Browser.ielt9){var a=L.DomUtil.createVML("shape");L.stamp(a);var h=L.DomUtil.createVML("textbox");h.innerHTML=r,h.inset="0,0,0,0",h.style.fontSize=o,h.style.color=this.options.color,a.appendChild(h),a.style.left=e.x,a.style.top=e.y,a.style.width=o*r.length*1.4,a.style.height=o+.4*o,t.appendChild(a);
}else t.font=this.options.fontSize+"px "+this.options.fontName,t.fillStyle=this.options.color,t.fillText(r,e.x,e.y)}}),L.textSymbol=function(t){return new L.TextSymbol(t)},L.NBTextSymbol=L.TextSymbol,L.nbTextSymbol=L.textSymbol,L.Graphic=L.Evented.extend({options:{interactive:!0},initialize:function(t,i,e,o){this._geometry=t,this._symbol=i,this.attributes=e,L.setOptions(this,o)},setGeometry:function(t){return this._geometry=t,this.redraw()},getGeometry:function(){return this._geometry},setSymbol:function(t){return this._symbol=t,this.redraw()},getSymbol:function(){return this._symbol},_project:function(){if(this._graphicsLayer&&this._graphicsLayer._map){var t=this._graphicsLayer._map;this._screenPoints=this._geometry.project(t),this._updateBounds()}},_updateBounds:function(){var t=this._clickTolerance(),i=this._geometry._pxBounds;this._pxBounds=new L.Bounds(i.min.subtract([t,t]),i.max.add([t,t])),this._symbol.measureBounds&&(this._pxBounds=this._symbol.measureBounds(this))},_update:function(){this._graphicsLayer&&(this._geometry._clipPoints(this),this._geometry._simplifyPoints(this),this._updateGraphic())},_updateGraphic:function(){if(this._graphicsLayer&&this._graphicsLayer._drawing&&!this._empty()){this._graphicsLayer._drawnGraphics[this._leaflet_id]=this;var t=this._graphicsLayer._ctx;this._symbol.draw(t,this)}},_empty:function(){return!this._graphicsLayer._bounds.intersects(this._pxBounds)},addTo:function(t){return t.add(this),this},remove:function(){return this.removeFrom(this._graphicsLayer||this._graphicsLayerToAdd)},removeFrom:function(t){return t&&t.remove(this),this},getCenter:function(){return this._geometry.getCenter(this._graphicsLayer._map)},getGraphicsLayer:function(){return this._graphicsLayer||this._graphicsLayerToAdd},_graphicAdd:function(t){var i=t.target;if(i.hasGraphic(this)){if(this._graphicsLayer=i,this._zoomAnimated=i._zoomAnimated,this.getEvents){var e=this.getEvents();i.on(e,this),this.once("remove",function(){i.off(e,this)},this)}this.onAdd(i),this.fire("add"),i.fire("graphicadd",{graphic:this})}},beforeAdd:function(t){this._graphicsLayer=t},onAdd:function(){this._graphicsLayer._initGraphic(this),this._reset(),this._graphicsLayer._addGraphic(this)},onRemove:function(){this._graphicsLayer._removeGraphic(this)},redraw:function(){return this._graphicsLayer&&this._graphicsLayer._updateGraphic(this),this},setStyle:function(t){return L.setOptions(this,t),this._graphicsLayer&&this._graphicsLayer._updateStyle(this),this},bringToFront:function(){return this._graphicsLayer&&this._graphicsLayer._bringToFront(this),this},bringToBack:function(){return this._graphicsLayer&&this._graphicsLayer._bringToBack(this),this},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(L.Browser.touch?10:0)},_containsPoint:function(t){var i=this._clickTolerance();return this._geometry instanceof L.MapPoint?this._pxBounds.contains(t):this._geometry._containsPoint(t,!1,i,this._pxBounds)}}),L.graphic=function(t,i,e,o){return new L.Graphic(t,i,e,o)},L.GraphicsLayer.include({add:function(t){var i=L.stamp(t);return this._graphicsProvider[i]?this:(this._graphicsProvider[i]=t,t._graphicsLayerToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._graphicAdd,t),this)},remove:function(t){var i=L.stamp(t);return this._graphicsProvider[i]?(this._map&&this._map._loaded&&t.onRemove(this),delete this._graphicsProvider[i],this._map&&this._map._loaded&&(this._updateGraphic(t),this.fire("graphicremove",{graphic:t}),t.fire("remove")),t._graphicsLayer=t._graphicsLayerToAdd=null,this):this},hasGraphic:function(t){return!!t&&L.stamp(t)in this._graphicsProvider},eachGraphic:function(t,i){for(var e in this._graphicsProvider)t.call(i,this._graphicsProvider[e]);return this},_addGraphics:function(t){t=t?L.Util.isArray(t)?t:[t]:[];for(var i=0,e=t.length;i<e;i++)this.addGraphic(t[i])}}),L.Polyline.prototype._containsPoint=function(t,i,e,o){var n,s,r,a,h,l,p=e;if(!o.contains(t))return!1;for(n=0,a=this._parts.length;n<a;n++)for(l=this._parts[n],s=0,h=l.length,r=h-1;s<h;r=s++)if(i||0!==s){var u=L.LineUtil.pointToSegmentDistance(t,l[r],l[s]);if(u<=p)return!0}return!1},L.Polygon.prototype._containsPoint=function(t,i,e,o){var n,s,r,a,h,l,p,u,c=!1;if(!o.contains(t))return!1;for(a=0,p=this._parts.length;a<p;a++)for(n=this._parts[a],h=0,u=n.length,l=u-1;h<u;l=h++)s=n[h],r=n[l],s.y>t.y!=r.y>t.y&&t.x<(r.x-s.x)*(t.y-s.y)/(r.y-s.y)+s.x&&(c=!c);return c||L.Polyline.prototype._containsPoint.call(this,t,!0,e,o)},L.Graphic.include({bindTooltip:function(t,i){return t instanceof L.Tooltip?(L.setOptions(t,i),this._tooltip=t,t._source=this):(this._tooltip&&!i||(this._tooltip=L.tooltip(i,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._graphicsLayer&&this._graphicsLayer._map&&this._graphicsLayer._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var i=t?"off":"on",e={remove:this.closeTooltip};this._tooltip.options.permanent?e.add=this._openTooltip:(e.mouseover=this._openTooltip,e.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(e.mousemove=this._moveTooltip),L.Browser.touch&&(e.click=this._openTooltip)),this[i](e),this._tooltipHandlersAdded=!t}},openTooltip:function(t,i){return t instanceof L.Graphic||(i=t,t=this),i||(i=t.getCenter()),this._tooltip&&this._graphicsLayer&&this._graphicsLayer._map&&(this._tooltip._source=t,this._tooltip.update(),this._graphicsLayer._map.openTooltip(this._tooltip,i.getLatLng()),this._tooltip.options.interactive&&this._tooltip._container&&(L.DomUtil.addClass(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(L.DomUtil.removeClass(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var i=t.graphic||t.target;this._tooltip&&this._graphicsLayer&&this._graphicsLayer._map&&this.openTooltip(i,this._tooltip.options.sticky?t.getCenter():undefined)},moveTooltip:function(){this._tooltip&&this._tooltip.setLatLng(this.getCenter().getLatLng())},_moveTooltip:function(t){var i,e,o=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(i=this._map.mouseEventToContainerPoint(t.originalEvent),e=this._map.containerPointToLayerPoint(i),o=this._map.layerPointToLatLng(e)),this._tooltip.setLatLng(o)}}),L.Popup.mergeOptions({closeOnClickGraphic:!1}),L.Graphic.include({bindPopup:function(t,i){return t instanceof L.Popup?(L.setOptions(t,i),this._popup=t,t._source=this):(this._popup&&!i||(this._popup=new L.Popup(i,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,remove:this.closePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,remove:this.closePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,i){return t instanceof L.Graphic||(i=t,t=this),i||(i=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._graphicsLayer&&this._graphicsLayer._map&&(this._popup._source=t,this._popup.update(),this._graphicsLayer._map.openPopup(this._popup,i.getLatLng())),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var i=t.graphic||t.target;this._popup&&this._graphicsLayer&&this._graphicsLayer._map&&(L.DomEvent.stop(t),this._graphicsLayer._map.hasLayer(this._popup)&&this._popup._source===i?this._popup.options.closeOnClickGraphic&&this.closePopup():this.openPopup(i))},movePopup:function(){this._popup&&this._popup.setLatLng(this.getCenter().getLatLng())},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),L.NBGraphic=L.Graphic,L.nbGraphic=L.graphic,L.Map.mergeOptions({boxZoom:!1}),L.Map.BoxZoom=L.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"mousedown",this._onMouseDown,this),this._map.dragging.disable()},removeHooks:function(){L.DomEvent.off(this._container,"mousedown",this._onMouseDown,this),this._map.dragging.enable()},moved:function(){return this._moved},_resetState:function(){this._moved=!1},_onMouseDown:function(t){return(1===t.which||1===t.button)&&(this._resetState(),L.DomUtil.disableTextSelection(),L.DomUtil.disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(t),void L.DomEvent.on(document,{contextmenu:L.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this))},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=L.DomUtil.create("div","leaflet-zoom-box",this._container),L.DomUtil.addClass(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var i=new L.Bounds(this._point,this._startPoint),e=i.getSize();L.DomUtil.setPosition(this._box,i.min),this._box.style.width=e.x+"px",this._box.style.height=e.y+"px"},_finish:function(){this._moved&&(L.DomUtil.remove(this._box),L.DomUtil.removeClass(this._container,"leaflet-crosshair")),L.DomUtil.enableTextSelection(),L.DomUtil.enableImageDrag(),L.DomEvent.off(document,{contextmenu:L.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){setTimeout(L.bind(this._resetState,this),0);var i=new L.LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this.options.zoomIn?this._zoomIn(i):this._zoomOut(i)}},_zoomIn:function(t){this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})},_zoomOut:function(t){var i=this._map.getBounds(),e=Math.pow(i.getEast()-i.getWest(),2)/2/(t.getEast()-t.getWest()),o=Math.pow(i.getNorth()-i.getSouth(),2)/2/(t.getNorth()-t.getSouth()),n=t.getCenter(),s=L.latLngBounds(L.latLng(n.lat-o,n.lng-e),L.latLng(n.lat+o,n.lng+e));this._map.fitBounds(s).fire("boxzoomend",{boxZoomBounds:s})},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),L.Map.addInitHook("addHandler","boxZoom",L.Map.BoxZoom),L.Control.Attribution=L.Control.extend({options:{position:"bottomright",prefix:'yiran'},initialize:function(t){L.setOptions(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=L.DomUtil.create("div","leaflet-control-attribution"),L.DomEvent&&L.DomEvent.disableClickPropagation(this._container);for(var i in t._layers)t._layers[i].getAttribution&&this.addAttribution(t._layers[i].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var i in this._attributions)this._attributions[i]&&t.push(i);var e=[];this.options.prefix&&e.push(this.options.prefix),t.length&&e.push(t.join(", ")),this._container.innerHTML=e.join(" | ")}}}),L.Map.mergeOptions({attributionControl:!0}),L.Map.addInitHook(function(){this.options.attributionControl&&(new L.Control.Attribution).addTo(this)}),L.control.attribution=function(t){return new L.Control.Attribution(t)},L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(t){var i,e,o=t.length,n=0,s=Math.PI/180;if(o>2){for(var r=0;r<o;r++)i=t[r],e=t[(r+1)%o],n+=(e.x-i.x)*s*(2+Math.sin(i.y*s)+Math.sin(e.y*s));n=6378137*n*6378137/2}return Math.abs(n)},formattedNumber:function(t,i){var e=t.toFixed(i),o=",",n=".";if(o||n){var s=e.split(".");e=o?s[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+o):s[0],n=n||".",s.length>1&&(e=e+n+s[1])}return e},readableArea:function(t){var i;return i=t>=1e6?L.GeometryUtil.formattedNumber(1e-6*t,2)+"平方公里":L.GeometryUtil.formattedNumber(t,2)+"平方米;"},readableDistance:function(t){return t>1e3?distanceStr=L.GeometryUtil.formattedNumber(t/1e3,2)+" km":distanceStr=L.GeometryUtil.formattedNumber(Math.ceil(t))+" m",distanceStr}}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart),L.DomEvent.off(this._container,"touchend",this._onTouchEnd),L.DomEvent.off(this._container,"touchmove",this._onTouchMove),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDowm",this._onTouchStart),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave))},_touchEvent:function(t,i){var e={};if("undefined"!=typeof t.touches){if(!t.touches.length)return;e=t.touches[0]}else{if("touch"!==t.pointerType)return;if(e=t,!this._filterClick(t))return}var o=this._map.mouseEventToContainerPoint(e),n=this._map.mouseEventToLayerPoint(e),s=this._map.layerPointToLatLng(n);this._map.fire(i,{latlng:s,layerPoint:n,containerPoint:o,pageX:e.pageX,pageY:e.pageY,originalEvent:t})},_filterClick:function(t){var i=t.timeStamp||t.originalEvent.timeStamp,e=L.DomEvent._lastClick&&i-L.DomEvent._lastClick;return e&&e>100&&e<500||t.target._simulatedClick&&!t._simulated?(L.DomEvent.stop(t),!1):(L.DomEvent._lastClick=i,!0)},_onTouchStart:function(t){if(this._map._loaded){var i="touchstart";this._touchEvent(t,i)}},_onTouchEnd:function(t){if(this._map._loaded){var i="touchend";this._touchEvent(t,i)}},_onTouchCancel:function(t){if(this._map._loaded){var i="touchcancel";this._detectIE()&&(i="pointercancel"),this._touchEvent(t,i)}},_onTouchLeave:function(t){if(this._map._loaded){var i="touchleave";this._touchEvent(t,i)}},_onTouchMove:function(t){if(this._map._loaded){var i="touchmove";this._touchEvent(t,i)}},_detectIE:function(){var t=window.navigator.userAgent,i=t.indexOf("MSIE ");if(i>0)return parseInt(t.substring(i+5,t.indexOf(".",i)),10);var e=t.indexOf("Trident/");if(e>0){var o=t.indexOf("rv:");return parseInt(t.substring(o+3,t.indexOf(".",o)),10)}var n=t.indexOf("Edge/");return n>0&&parseInt(t.substring(n+5,t.indexOf(".",n)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Draw={},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Type={},L.Draw.Type.POINT="point",L.Draw.Type.POLYLINE="polyline",L.Draw.Type.POLYGON="polygon",L.Draw.Type.CIRCLE="circle",L.Draw.Type.RECTANGLE="rectangle",L.Draw.common={},L.Draw.common.color="#3388ff",L.DrawTip={point:{start:"点击地图绘制点."},polyline:{error:"图形边界不允许交叉.",start:"点击地图开始绘制线图形.",cont:"继续点击以绘制线图形.",end:"双击完成绘制."},polygon:{error:"绘制面至少需要三个点.",start:"点击地图开始绘制面图形.",cont:"继续点击以绘制面图形.",end:"双击完成绘制."},circle:{start:"点击并拖拽以绘制圆."},rectangle:{start:"点击并拖拽以绘制矩形."},simpleshape:{end:"释放鼠标以结束绘制."}},L.Draw.drawLayer=null,L.Draw.popupArr=[],L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({includes:L.Mixin.Events,initialize:function(t,i){this._map=t,this._container=t._container,this._overlayPane=t._panes.overlayPane,this._popupPane=t._panes.popupPane,i&&i.graphicOptions&&(i.graphicOptions=L.Util.extend({},this.options.graphicOptions,i.graphicOptions)),L.setOptions(this,i);var e=t.minZoom;null!=i.minZoom&&e>i.minZoom&&(e=i.minZoom),i.drawLayer?L.Draw.drawLayer=i.drawLayer:null==L.Draw.drawLayer&&(L.Draw.drawLayer=L.graphicsLayer({minZoom:e})),t.hasLayer(L.Draw.drawLayer)||(L.Draw.drawLayer=L.graphicsLayer({minZoom:e}).addTo(t))},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{drawType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var t=this._map;t&&(L.DomUtil.disableTextSelection(),this._mapDoubleClickZoomable=this._map.doubleClickZoom.enabled(),this._mapDoubleClickZoomable&&this._map.doubleClickZoom.disable(),t.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),null!=this._tooltip&&(this._tooltip.dispose(),this._tooltip=null),L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this),this._mapDoubleClickZoomable&&this._map.doubleClickZoom.enable())},setOptions:function(t){L.setOptions(this,t)},_fireCreatedEvent:function(t){this._map.fire(L.Draw.Event.CREATED,{graphic:t,drawType:this.type})},_cancelDrawing:function(t){27===t.keyCode&&(this._map.fire("draw:canceled",{drawType:this.type}),this.disable())}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(t,i){this._endLabelText=L.DrawTip.simpleshape.end,L.Draw.Feature.prototype.initialize.call(this,t,i)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(document,"mouseup",this._onMouseUp,this),L.DomEvent.off(document,"touchend",this._onMouseUp,this),this._graphic&&(L.Draw.drawLayer.remove(this._graphic),delete this._graphic)),this._isDrawing=!1},_getTooltipText:function(t){return{text:this._endLabelText}},_onMouseDown:function(t){this._isDrawing=!0,this._startLatLng=t.latlng,L.DomEvent.on(document,"mouseup",this._onMouseUp,this).on(document,"touchend",this._onMouseUp,this).preventDefault(t.originalEvent)},_onMouseMove:function(t){var i=t.latlng;this._tooltip.updatePosition(i),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText(i)),this._drawShape(i))},_onMouseUp:function(){this._isDrawing=!1,this._graphic&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{symbol:L.simpleFillSymbol({color:L.Draw.common.color}),graphicOptions:{clickable:!0},showRadius:!1,metric:!0,feet:!0,nautic:!1},initialize:function(t,i){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.DrawTip.circle.start,L.Draw.SimpleShape.prototype.initialize.call(this,t,i)},_drawShape:function(t){var i=L.mapPoint(this._startLatLng.lng,this._startLatLng.lat);if(radius=Math.sqrt(Math.pow(this._startLatLng.lat-t.lat,2)+Math.pow(this._startLatLng.lng-t.lng,2)),this._graphic){var e=this._graphic._geometry;e._setPoints(this._getCircle(i,radius)),this._graphic.redraw()}else{var e=L.polygon(this._getCircle(i,radius));this._graphic=L.graphic(e,this.options.symbol,{},this.options.graphicOptions),this._graphic.addTo(L.Draw.drawLayer)}},_fireCreatedEvent:function(){var t=this._graphic._geometry,i=L.graphic(t,this.options.symbol,{},this.options.graphicOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,i)},_onMouseMove:function(t){var i,e=t.latlng,o=this.options.showRadius;if(this._tooltip.updatePosition(e),this._isDrawing){this._drawShape(e),i=e.distanceTo(this._startLatLng);var n="";o&&(n="半径: "+L.GeometryUtil.readableDistance(i)),this._tooltip.updateContent({text:this._endLabelText,subtext:n})}},_getTooltipText:function(t){var i,e,o=L.Draw.SimpleShape.prototype._getTooltipText.call(this),n=this.options.showRadius,s=this._graphic;return s&&(i=t.distanceTo(this._startLatLng.lng),e=n?"半径: "+L.GeometryUtil.readableDistance(i):""),{text:o.text,subtext:e}},_getCircle:function(t,i){for(var e,o,n,s,r=[],a=0;a<100;a++)e=Math.sin(2*Math.PI*a/100),o=Math.cos(2*Math.PI*a/100),n=t.getX()+i*e,s=t.getY()+i*o,r.push(L.mapPoint(n,s));return r},clear:function(){}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{showArea:!1,symbol:L.simpleFillSymbol({color:L.Draw.common.color}),graphicOptions:{clickable:!0},metric:!0},initialize:function(t,i){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.DrawTip.rectangle.start,L.Draw.SimpleShape.prototype.initialize.call(this,t,i)},_drawShape:function(t){if(this._graphic){var i=L.extent(this._startLatLng.getMapPoint(),t.getMapPoint()).toPolygon();this._graphic.setGeometry(i),this._graphic.redraw()}else{var i=L.extent(this._startLatLng.getMapPoint(),t.getMapPoint()).toPolygon();this._graphic=L.graphic(i,this.options.symbol,{},this.options.graphicOptions),this._graphic.addTo(L.Draw.drawLayer)}},_fireCreatedEvent:function(){var t=this._graphic._geometry,i=L.graphic(t,this.options.symbol,{},this.options.graphicOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,i)},_getTooltipText:function(t){var i,e,o,n=L.Draw.SimpleShape.prototype._getTooltipText.call(this),s=this._graphic,r=this.options.showArea;return s&&(i=this._graphic._geometry.getPoints(),e=L.GeometryUtil.geodesicArea(i),o=r?L.GeometryUtil.readableArea(e):""),{text:n.text,subtext:o}},clear:function(){}}),L.Draw.Point=L.Draw.Feature.extend({statics:{TYPE:"point"},options:{symbol:L.simpleMarkerSymbol({style:"circle",width:10,height:10}),graphicOptions:{clickable:!0},repeatMode:!1,zIndexOffset:2e3},initialize:function(t,i){this.type=L.Draw.Point.TYPE,L.Draw.Feature.prototype.initialize.call(this,t,i)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:L.DrawTip.point.start}),this._map.on("mousemove",this._onMouseMove,this),this._map.on("mousedown",this._onClick,this),this._container.style.cursor="crosshair")},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._graphic&&(L.Draw.drawLayer.remove(this._graphic),delete this._graphic),this._map&&(this._map.off("mousedown",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this),this._container.style.cursor="")},clear:function(){},_onMouseMove:function(t){var i=t.latlng;this._tooltip.updatePosition(i)},_onClick:function(t){if(this._graphic){var i=this._graphic._geometry;i.fromLatLng(t.latlng),this._graphic.redraw()}else{var i=t.latlng.getMapPoint();this._graphic=L.graphic(i,this.options.symbol,{},this.options.graphicOptions),this._graphic.addTo(L.Draw.drawLayer)}this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_fireCreatedEvent:function(){var t=this._graphic._geometry,i=L.graphic(t,this.options.symbol,{},this.options.graphicOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,i)}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},color:"#3388ff",guidelineDistance:20,maxGuideLineLength:4e3,symbol:L.simpleLineSymbol({color:"#3388ff"}),graphicOptions:{clickable:!0},showLength:!1,zIndexOffset:2e3},initialize:function(t,i){this.options.drawError.message=L.DrawTip.polygon.error,i&&i.drawError&&(i.drawError=L.Util.extend({},this.options.drawError,i.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,t,i),this._measurementRunningTotal=0,this._currentDistance=0},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._poly=new L.polyline([]),this.type==L.Draw.Polygon.TYPE&&(this._poly=new L.polygon([])),this._graphic=L.graphic(this._poly,this.options.symbol,{},this.options.graphicOptions),this._tooltip.updateContent(this._getTooltipText()),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("mousedown",this._onTouch,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this).on("dblclick",this._onDBClick,this),this._container.style.cursor="crosshair")},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),delete this._markers,this._graphic&&(L.Draw.drawLayer.remove(this._graphic),delete this._graphic),this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("mousedown",this._onTouch,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this).off("dblclick",this._onDBClick,this),this._container.style.cursor=""},clear:function(){},addVertex:function(t){this._markers.push(t.getMapPoint()),this._poly.addPoint(t.getMapPoint()),this._graphic.redraw(),this.type==L.Draw.Polyline.TYPE&&2===this._poly.getPoints().length?this._graphic.addTo(L.Draw.drawLayer):this.type==L.Draw.Polygon.TYPE&&3===this._poly.getPoints()[0].length&&this._graphic.addTo(L.Draw.drawLayer),this._markers.length>1&&(this._measurementRunningTotal+=this._currentDistance),this._vertexChanged(t,!0)},_finishShape:function(){return this._shapeIsValid()?(this._graphic._graphicsLayer&&this._fireCreatedEvent(),this.disable(),void(this.options.repeatMode&&this.enable())):void this._showErrorTooltip()},_onZoomEnd:function(){null!==this._markers&&this._updateGuide()},_onMouseMove:function(t){var i=this._map.mouseEventToLayerPoint(t.originalEvent),e=this._map.layerPointToLatLng(i);this._currentLatLng=e,this._updateTooltip(e),this._updateGuide(i),L.DomEvent.preventDefault(t.originalEvent)},_vertexChanged:function(t,i){this._map.fire(L.Draw.Event.DRAWVERTEX,{graphic:this._graphic}),this._clearGuides(),this._updateTooltip()},_startPoint:function(t,i){this._mouseDownOrigin=L.point(t,i)},_onMouseUp:function(t){var i=t.originalEvent,e=i.clientX,o=i.clientY;this._endPoint.call(this,e,o,t),this._clickHandled=null},_endPoint:function(t,i,e){if(this._mouseDownOrigin){var o=L.point(t,i).distanceTo(this._mouseDownOrigin);Math.abs(o)<9*(window.devicePixelRatio||1)&&this.addVertex(e.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(t){var i,e,o=t.originalEvent;this._clickHandled||this._touchHandled||this._disableMarkers||(o.touches&&o.touches[0]?(i=o.touches[0].clientX,e=o.touches[0].clientY):(i=o.clientX,e=o.clientY),this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,i,e),this._endPoint.call(this,i,e,t),this._touchHandled=null),this._clickHandled=null},_onDBClick:function(){this._finishShape()},_updateGuide:function(t){var i=this._markers?this._markers.length:0;i>0&&(t=t||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[i-1].getLatLng()),t))},_updateTooltip:function(t){var i=this._getTooltipText();t&&this._tooltip.updatePosition(t),this._errorShown||this._tooltip.updateContent(i)},_drawGuide:function(t,i){var e,o,n,s=Math.floor(Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2))),r=this.options.guidelineDistance,a=this.options.maxGuideLineLength,h=s>a?s-a:r;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));h<s;h+=this.options.guidelineDistance)e=h/s,o={x:Math.floor(t.x*(1-e)+e*i.x),y:Math.floor(t.y*(1-e)+e*i.y)},n=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),n.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.color,L.DomUtil.setPosition(n,o)},_updateGuideColor:function(t){if(this._guidesContainer)for(var i=0,e=this._guidesContainer.childNodes.length;i<e;i++)this._guidesContainer.childNodes[i].style.backgroundColor=t},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var t,i,e=this.options.showLength;return 0===this._markers.length?t={text:L.DrawTip.polyline.start}:(i=e?this._getMeasurementString():"",t=1===this._markers.length?{text:L.DrawTip.polyline.cont,subtext:i}:{text:L.DrawTip.polyline.end,subtext:i}),t},_getMeasurementString:function(){1===this._markers.length&&(this._measurementRunningTotal=0,this._currentDistance=0);var t,i=this._currentLatLng,e=this._markers[this._markers.length-1].getLatLng();return this._currentDistance=i.distanceTo(e),t=this._measurementRunningTotal+i.distanceTo(e),L.GeometryUtil.readableDistance(t)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.color)},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout(function(){this._disableMarkers=!1}.bind(this),50)},_fireCreatedEvent:function(){var t=this._graphic._geometry,i=L.graphic(t,this.options.symbol,{},this.options.graphicOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,i)},_shapeIsValid:function(){return!0}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,symbol:L.simpleFillSymbol({fillColor:"#3388ff"}),graphicOptions:{
clickable:!0},metric:!0},initialize:function(t,i){L.Draw.Polyline.prototype.initialize.call(this,t,i),this.type=L.Draw.Polygon.TYPE,this._currentArea=0},_shapeIsValid:function(){var t=this._markers.length;return this._markers.length>=3&&this._markers[t-1].equals(this._markers[t-2])&&(t-=1),t>=3},_getTooltipText:function(){var t,i,e=this.options.showArea;return 0===this._markers.length?t={text:L.DrawTip.polygon.start}:(i=e?this._getMeasurementString():"",t=this._markers.length<3?{text:L.DrawTip.polygon.cont,subtext:i}:{text:L.DrawTip.polygon.end,subtext:i}),t},_getMeasurementString:function(){1===this._markers.length&&(this._measurementRunningTotal=0,this._currentDistance=0);for(var t=[],i=0;i<this._markers.length;i++)t.push(this._markers[i]);return t.push(this._currentLatLng.getMapPoint()),this._currentArea=L.GeometryUtil.geodesicArea(t),L.GeometryUtil.readableArea(this._currentArea)},clear:function(){}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(t){this._map=t,this._popupPane=t._panes.popupPane,this._visible=!1,this._container=t.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(t){return this._container?(t.subtext=t.subtext||"",0!==t.subtext.length||this._singleLineLabel?t.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(t.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+t.subtext+"</span><br />":"")+"<span>"+t.text+"</span>",t.text||t.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(t){var i=this._map.latLngToLayerPoint(t),e=this._container;return this._container&&(this._visible&&(e.style.visibility="inherit"),L.DomUtil.setPosition(e,i)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawTool=L.Class.extend({options:{repeatMode:!1,showLength:!1,onDrawEnd:null,onDisabled:null},initialize:function(t,i){this._map=t,L.setOptions(this,i)},setDrawMapPointTool:function(t){this.disable(),this._draw=new L.Draw.Point(this._map,t),this._enable(t)},setDrawPolylineTool:function(t){this.disable(),this._draw=new L.Draw.Polyline(this._map,t),this._enable(t)},setDrawPolygonTool:function(t){this.disable(),this._draw=new L.Draw.Polygon(this._map,t),this._enable(t)},setDrawRectTool:function(t){this.disable(),this._draw=new L.Draw.Rectangle(this._map,t),this._enable(t)},setDrawCircleTool:function(t){this.disable(),this._draw=new L.Draw.Circle(this._map,t),this._enable(t)},_enable:function(t){this._draw&&(L.setOptions(this._draw,this.options),L.setOptions(this._draw,t),this._draw.enable())},disable:function(){null!=this._draw&&(this._draw.clear(),this._draw.disable(),this._draw=null,this.options.onDisabled&&this._draw.onDisabled())}}),L.drawTool=function(t,i){return new L.DrawTool(t,i)},L.Map.mergeOptions({drawControlTooltips:!0}),L.Map.addInitHook(function(){this.drawTool=L.drawTool(this),this.on(L.Draw.Event.CREATED,function(t){this.drawTool&&this.drawTool._draw&&this.drawTool._draw.options.onDrawEnd&&this.drawTool._draw.options.onDrawEnd(t.graphic)}),this.on(L.Draw.Event.DRAWVERTEX,function(t){this.drawTool&&this.drawTool._draw&&this.drawTool._draw.options.onDrawUpdate&&this.drawTool._draw.options.onDrawUpdate(t.graphic)})})}(window,document);